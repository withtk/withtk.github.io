<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>JSON ÏΩîÎìú Î≥ÄÌôòÍ∏∞</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            background: rgba(255, 255, 255, 0.95);
            border-radius: 20px;
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.1);
            overflow: hidden;
        }

        .header {
            background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%);
            padding: 30px;
            text-align: center;
            color: white;
        }

        .header h1 {
            font-size: 2.5em;
            margin-bottom: 10px;
            text-shadow: 0 2px 4px rgba(0, 0, 0, 0.3);
        }

        .header p {
            font-size: 1.1em;
            opacity: 0.9;
        }

        .main-content {
            padding: 30px;
        }

        .input-section {
            margin-bottom: 30px;
        }

        .input-section h2 {
            color: #333;
            margin-bottom: 15px;
            font-size: 1.5em;
            display: flex;
            align-items: center;
        }

        .input-section h2::before {
            content: "üìù";
            margin-right: 10px;
            font-size: 1.2em;
        }

        .file-input-wrapper {
            position: relative;
            display: inline-block;
            margin-bottom: 15px;
        }

        .file-input {
            position: absolute;
            width: 1px;
            height: 1px;
            padding: 0;
            margin: -1px;
            overflow: hidden;
            clip: rect(0, 0, 0, 0);
            border: 0;
        }

        .file-input-label {
            display: inline-block;
            padding: 12px 24px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border-radius: 10px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-weight: 600;
        }

        .file-input-label:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 20px rgba(102, 126, 234, 0.4);
        }

        .textarea-wrapper {
            position: relative;
        }

        textarea {
            width: 100%;
            height: 200px;
            padding: 20px;
            border: 2px solid #e1e5e9;
            border-radius: 15px;
            font-family: 'Monaco', 'Menlo', 'Ubuntu Mono', monospace;
            font-size: 14px;
            line-height: 1.5;
            resize: vertical;
            transition: all 0.3s ease;
            background: #f8f9fa;
        }

        textarea:focus {
            outline: none;
            border-color: #667eea;
            box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);
            background: white;
        }

        .convert-section {
            text-align: center;
            margin: 30px 0;
        }

        .convert-btn {
            background: linear-gradient(135deg, #ff6b6b 0%, #feca57 100%);
            color: white;
            border: none;
            padding: 15px 40px;
            border-radius: 50px;
            font-size: 1.1em;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 8px 20px rgba(255, 107, 107, 0.3);
        }

        .convert-btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 15px 30px rgba(255, 107, 107, 0.4);
        }

        .keys-section {
            background: linear-gradient(135deg, #a8edea 0%, #fed6e3 100%);
            border-radius: 15px;
            padding: 25px;
            margin-bottom: 30px;
            border: 2px solid rgba(255, 255, 255, 0.3);
        }

        .keys-section h2 {
            color: #2d3748;
            margin-bottom: 20px;
            font-size: 1.4em;
        }

        .keys-section h2::before {
            content: "üîë";
            margin-right: 10px;
        }

        .case-converters {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin-top: 20px;
        }

        .case-item {
            background: rgba(255, 255, 255, 0.7);
            border-radius: 10px;
            padding: 15px;
            border: 2px solid rgba(255, 255, 255, 0.5);
            transition: all 0.3s ease;
        }

        .case-item:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
            background: rgba(255, 255, 255, 0.9);
        }

        .case-item h4 {
            color: #2d3748;
            margin-bottom: 8px;
            font-size: 0.9em;
            font-weight: 600;
        }

        .case-output {
            background: #f7fafc;
            border: 1px solid #e2e8f0;
            border-radius: 6px;
            padding: 8px;
            font-family: 'Monaco', 'Menlo', 'Ubuntu Mono', monospace;
            font-size: 12px;
            line-height: 1.3;
            color: #4a5568;
            min-height: 50px;
            overflow-y: auto;
            white-space: pre-wrap;
        }

        .keys-output {
            background: rgba(255, 255, 255, 0.8);
            border: 2px solid rgba(255, 255, 255, 0.6);
            border-radius: 10px;
            padding: 15px;
            margin-bottom: 20px;
        }

        .keys-output h4 {
            color: #2d3748;
            margin-bottom: 10px;
            font-size: 1em;
        }

        .keys-content {
            background: #f7fafc;
            border-radius: 8px;
            padding: 12px;
            font-family: 'Monaco', 'Menlo', 'Ubuntu Mono', monospace;
            font-size: 13px;
            color: #4a5568;
            max-height: 150px;
            overflow-y: auto;
        }

        .output-section {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 30px;
            margin-top: 30px;
        }

        .output-box {
            background: #f8f9fa;
            border-radius: 15px;
            border: 2px solid #e1e5e9;
            overflow: hidden;
        }

        .output-header {
            background: linear-gradient(135deg, #54a0ff 0%, #2e86ab 100%);
            color: white;
            padding: 15px 20px;
            font-weight: 600;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .output-content {
            padding: 20px;
            max-height: 400px;
            overflow-y: auto;
        }

        pre {
            margin: 0;
            font-family: 'Monaco', 'Menlo', 'Ubuntu Mono', monospace;
            font-size: 13px;
            line-height: 1.4;
            white-space: pre-wrap;
            word-wrap: break-word;
        }

        .copy-btn {
            background: rgba(255, 255, 255, 0.2);
            border: 1px solid rgba(255, 255, 255, 0.3);
            color: white;
            padding: 6px 12px;
            border-radius: 6px;
            cursor: pointer;
            font-size: 12px;
            transition: all 0.3s ease;
        }

        .copy-btn:hover {
            background: rgba(255, 255, 255, 0.3);
        }

        .error {
            background: #fff5f5;
            border: 2px solid #feb2b2;
            color: #c53030;
            padding: 15px;
            border-radius: 10px;
            margin-top: 15px;
        }

        .success {
            background: #f0fff4;
            border: 2px solid #9ae6b4;
            color: #276749;
            padding: 10px;
            border-radius: 6px;
            margin-top: 5px;
            font-size: 12px;
        }

        .case-copy-btn {
            display: inline-block;
            width: 100%;
            padding: 10px 0;
            margin-bottom: 8px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            border-radius: 8px;
            font-weight: 600;
            font-size: 1em;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 4px 12px rgba(102, 126, 234, 0.15);
        }
        #screamingSnakeCaseBtn {
            font-size: 0.7em !important;
        }
        .case-copy-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 20px rgba(102, 126, 234, 0.25);
            background: linear-gradient(135deg, #764ba2 0%, #667eea 100%);
        }
        .output-copy-btn {
            background: linear-gradient(135deg, #54a0ff 0%, #2e86ab 100%);
            color: white;
            border: none;
            padding: 8px 18px;
            border-radius: 8px;
            font-size: 13px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            margin-left: 10px;
        }
        .output-copy-btn:hover {
            background: linear-gradient(135deg, #2e86ab 0%, #54a0ff 100%);
            box-shadow: 0 6px 16px rgba(84, 160, 255, 0.18);
        }

        .output-edit-field {
            width: 100%;
            min-height: 180px;
            font-family: 'Monaco', 'Menlo', 'Ubuntu Mono', monospace;
            font-size: 13px;
            border-radius: 10px;
            border: 1.5px solid #e1e5e9;
            padding: 12px;
            background: #f8f9fa;
        }

        @media (max-width: 768px) {
            .output-section {
                grid-template-columns: 1fr;
            }

            .header h1 {
                font-size: 2em;
            }
        }
    </style>
</head>
<body>
<div class="container">
    <div class="header">
        <h1>üîÑ JSON ÏΩîÎìú Î≥ÄÌôòÍ∏∞</h1>
        <p>JSONÏùÑ JavaScript Í∞ùÏ≤¥ÏôÄ Java DTOÎ°ú Î≥ÄÌôòÌïòÏÑ∏Ïöî</p>
    </div>

    <div class="main-content">
        <div class="keys-section">
            <h2>properties string Î≥ÄÌôò</h2>

            <div class="keys-output">
                <h4>üîë Î≥ÄÌôòÌï† Î™©Î°ù
                    <button class="output-copy-btn" type="button" onclick="copyCaseOutput('keysOutputField')">Î≥µÏÇ¨</button>
                    <button class="output-copy-btn" type="button" onclick="updateKeysAndCases()">Î≥ÄÌôò</button>
                </h4>
                <textarea class="keys-content" id="keysOutputField" style="max-height:150px; min-height:60px;"></textarea>
            </div>

            <div class="case-converters">
                <div class="case-item">
                    <button type="button" class="case-copy-btn" onclick="copyCaseOutput('camelCaseOutput')">üê™ camelCase</button>
                    <textarea class="case-output" id="camelCaseOutput">Î≥ÄÌôò Í≤∞Í≥º...</textarea>
                </div>
                <div class="case-item">
                    <button type="button" class="case-copy-btn" onclick="copyCaseOutput('snakeCaseOutput')">üêç snake_case</button>
                    <textarea class="case-output" id="snakeCaseOutput">Î≥ÄÌôò Í≤∞Í≥º...</textarea>
                </div>
                <div class="case-item">
                    <button type="button" class="case-copy-btn" onclick="copyCaseOutput('screamingSnakeCaseOutput')" id="screamingSnakeCaseBtn">üî• SCREAMING_SNAKE_CASE</button>
                    <textarea class="case-output" id="screamingSnakeCaseOutput">Î≥ÄÌôò Í≤∞Í≥º...</textarea>
                </div>
                <div class="case-item">
                    <button type="button" class="case-copy-btn" onclick="copyCaseOutput('pascalCaseOutput')">üèõÔ∏è PascalCase</button>
                    <textarea class="case-output" id="pascalCaseOutput">Î≥ÄÌôò Í≤∞Í≥º...</textarea>
                </div>
                <div class="case-item">
                    <button type="button" class="case-copy-btn" onclick="copyCaseOutput('kebabCaseOutput')">üîó kebab-case</button>
                    <textarea class="case-output" id="kebabCaseOutput">Î≥ÄÌôò Í≤∞Í≥º...</textarea>
                </div>
                <div class="case-item">
                    <button type="button" class="case-copy-btn" onclick="copyCaseOutput('lowercaseOutput')">üìù lowercase</button>
                    <textarea class="case-output" id="lowercaseOutput">Î≥ÄÌôò Í≤∞Í≥º...</textarea>
                </div>
            </div>
            <div class="suffix-tools" style="margin-top:10px; justify-content:flex-end;">
                <input type="text" class="suffix-input" id="globalSuffix" placeholder="surfix" style="width:60px; font-size:11px; padding:2px 4px; margin-right:2px;">
                <button type="button" class="suffix-btn" onclick="addSuffixToAll()">ÏÇΩÏûÖ</button>
                <button type="button" class="suffix-btn" onclick="redoSuffixAll()">ÎêòÎèåÎ¶¨Í∏∞</button>
            </div>
        </div>

        <div class="input-section">
            <h2>JSON ÏûÖÎ†•</h2>
            <div class="file-input-wrapper">
                <input type="file" id="jsonFile" class="file-input" accept=".json">
                <label for="jsonFile" class="file-input-label">üìÅ JSON ÌååÏùº ÏÑ†ÌÉù</label>
            </div>
            <div class="textarea-wrapper">
                    <textarea id="jsonInput" placeholder='JSON Îç∞Ïù¥ÌÑ∞Î•º ÏûÖÎ†•ÌïòÍ±∞ÎÇò ÌååÏùºÏùÑ ÏÑ†ÌÉùÌïòÏÑ∏Ïöî...

ÏòàÏãú:
{
  "user_name": "ÌôçÍ∏∏Îèô",
  "USER_AGE": 30,
  "emailAddress": "hong@example.com",
  "home_address": {
    "city_name": "ÏÑúÏö∏",
    "zip_code": "12345"
  },
  "user_hobbies": ["ÎèÖÏÑú", "ÏòÅÌôîÍ∞êÏÉÅ"]
}'></textarea>
            </div>
        </div>

        <div class="convert-section">
            <button class="convert-btn" onclick="convertCode()">‚ú® Î≥ÄÌôòÌïòÍ∏∞</button>
        </div>

        <div class="output-section">
            <div class="output-box">
                <div class="output-header">
                    <span>üì¶ JavaScript Í∞ùÏ≤¥</span>
                    <button class="output-copy-btn" type="button" onclick="copyCaseOutput('jsOutputField')">Î≥µÏÇ¨</button>
                </div>
                <div class="output-content">
                    <textarea class="output-edit-field" id="jsOutputField" style="width:100%; min-height:180px; font-family:'Monaco','Menlo','Ubuntu Mono',monospace; font-size:13px; border-radius:10px; border:1.5px solid #e1e5e9; padding:12px; background:#f8f9fa;"></textarea>
                </div>
            </div>

            <div class="output-box">
                <div class="output-header">
                    <span>‚òï Java DTO</span>
                    <button class="output-copy-btn" type="button" onclick="copyCaseOutput('javaOutputField')">Î≥µÏÇ¨</button>
                </div>
                <div class="output-content">
                    <textarea class="output-edit-field" id="javaOutputField" style="width:100%; min-height:180px; font-family:'Monaco','Menlo','Ubuntu Mono',monospace; font-size:13px; border-radius:10px; border:1.5px solid #e1e5e9; padding:12px; background:#f8f9fa;"></textarea>
                </div>
            </div>
        </div>
    </div>
</div>

<script>
    // ÌååÏùº ÏûÖÎ†• Ï≤òÎ¶¨
    document.getElementById('jsonFile').addEventListener('change', function(e) {
        const file = e.target.files[0];
        if (file) {
            const reader = new FileReader();
            reader.onload = function(e) {
                document.getElementById('jsonInput').value = e.target.result;
                updateKeysAndCases();
            };
            reader.readAsText(file);
        }
    });

    // JSON ÏûÖÎ†• Î≥ÄÍ≤Ω Ïãú Ïã§ÏãúÍ∞Ñ ÏóÖÎç∞Ïù¥Ìä∏ (debounce Ï†ÅÏö©)
    let debounceTimer;
    document.getElementById('jsonInput').addEventListener('input', function() {
        clearTimeout(debounceTimer);
        debounceTimer = setTimeout(updateKeysAndCases, 300);
    });

    // KeysÏôÄ Case Î≥ÄÌôò ÏóÖÎç∞Ïù¥Ìä∏
    function updateKeysAndCases() {
        const jsonInput = document.getElementById('jsonInput').value.trim();
        const keysField = document.getElementById('keysOutputField');

        if (!jsonInput) {
            // keysOutputFieldÏùò Í∞íÏùÑ ÌååÏã±ÌïòÏó¨ ÏºÄÏù¥Ïä§ Î≥ÄÌôò
            // Î∞∞Ïó¥ ÌòïÌÉú(["user_name", "USER_AGE", ...])ÎèÑ ÏßÄÏõê
            const keysRaw = keysField.value.trim();
            let keys = [];
            if (!keysRaw) {
                clearCaseOutputs();
                // Ìï®Ïàò ÎèôÏûë ÏöîÏïΩ Î°úÍ∑∏
                console.log('[updateKeysAndCases] ÏûÖÎ†•Í∞í ÏóÜÏùå: Î≥ÄÌôò Í≤∞Í≥º Ï¥àÍ∏∞Ìôî');
                return;
            }
            try {
                // JSON Î∞∞Ïó¥ ÌòïÌÉú
                if ((keysRaw.startsWith('[') && keysRaw.endsWith(']')) || (keysRaw.startsWith("[") && keysRaw.endsWith("]"))) {
                    keys = JSON.parse(keysRaw);
                } else {
                    // ÏâºÌëú, Ï§ÑÎ∞îÍøà, ÎùÑÏñ¥Ïì∞Í∏∞ Îì±ÏúºÎ°ú Íµ¨Î∂Ñ
                    keys = keysRaw.split(/,|\n|\r|\s+/).map(k => k.trim()).filter(k => k);
                }
            } catch (e) {
                // fallback: ÏâºÌëú, Ï§ÑÎ∞îÍøà, ÎùÑÏñ¥Ïì∞Í∏∞ Îì±ÏúºÎ°ú Íµ¨Î∂Ñ
                keys = keysRaw.split(/,|\n|\r|\s+/).map(k => k.trim()).filter(k => k);
            }
            updateCaseConversions(keys);
            // Ìï®Ïàò ÎèôÏûë ÏöîÏïΩ Î∞è Í≤∞Í≥º Î°úÍ∑∏
            console.log('[updateKeysAndCases] keysOutputField Í∞í Í∏∞Ï§Ä Î≥ÄÌôò:', keys);
            return;
        }

        try {
            const jsonObj = JSON.parse(jsonInput);
            const allKeys = getAllKeys(jsonObj);

            // Object.keys() Í≤∞Í≥º ÌëúÏãú
            // Í∞Å ÏºÄÏù¥Ïä§Î°ú Î≥ÄÌôò
            updateCaseConversions(allKeys);
            // Ìï®Ïàò ÎèôÏûë ÏöîÏïΩ Î∞è Í≤∞Í≥º Î°úÍ∑∏
            console.log('[updateKeysAndCases] jsonInput Í∏∞Ï§Ä Î≥ÄÌôò:', allKeys);
        } catch (error) {
            // JSON ÌååÏã± Ïò§Î•òÍ∞Ä Î∞úÏÉùÌï¥ÎèÑ ÌÇ§ Ï∂úÎ†•ÏùÄ Ï¥àÍ∏∞Ìôî
            clearCaseOutputs();
            // Ìï®Ïàò ÎèôÏûë ÏöîÏïΩ Î∞è ÏóêÎü¨ Î°úÍ∑∏
            console.log('[updateKeysAndCases] JSON ÌååÏã± Ïò§Î•ò:', error);
        }
    }

    // Î™®Îì† ÌÇ§ Ï∂îÏ∂ú (Ï§ëÏ≤© Í∞ùÏ≤¥ Ìè¨Ìï®)
    function getAllKeys(obj, keys = new Set()) {
        if (typeof obj !== 'object' || obj === null) {
            return Array.from(keys);
        }

        for (const key in obj) {
            if (obj.hasOwnProperty(key)) {
                keys.add(key);

                if (typeof obj[key] === 'object' && obj[key] !== null && !Array.isArray(obj[key])) {
                    getAllKeys(obj[key], keys);
                }
            }
        }

        return Array.from(keys);
    }

    // ÏºÄÏù¥Ïä§ Î≥ÄÌôò ÏóÖÎç∞Ïù¥Ìä∏
    function updateCaseConversions(keys) {
        try {
            document.getElementById('camelCaseOutput').value = keys.map(toCamelCase).join('\n') || 'Î≥ÄÌôò Í≤∞Í≥º...';
            document.getElementById('snakeCaseOutput').value = keys.map(toSnakeCase).join('\n') || 'Î≥ÄÌôò Í≤∞Í≥º...';
            document.getElementById('screamingSnakeCaseOutput').value = keys.map(toScreamingSnakeCase).join('\n') || 'Î≥ÄÌôò Í≤∞Í≥º...';
            document.getElementById('pascalCaseOutput').value = keys.map(toPascalCase).join('\n') || 'Î≥ÄÌôò Í≤∞Í≥º...';
            document.getElementById('kebabCaseOutput').value = keys.map(toKebabCase).join('\n') || 'Î≥ÄÌôò Í≤∞Í≥º...';
            document.getElementById('lowercaseOutput').value = keys.map(str => str.toLowerCase()).join('\n') || 'Î≥ÄÌôò Í≤∞Í≥º...';
        } catch (error) {
            console.error('ÏºÄÏù¥Ïä§ Î≥ÄÌôò Ïò§Î•ò:', error);
            clearCaseOutputs();
        }
    }

    // ÏºÄÏù¥Ïä§ Ï∂úÎ†• Ï¥àÍ∏∞Ìôî
    function clearCaseOutputs() {
        const outputs = ['camelCaseOutput', 'snakeCaseOutput', 'screamingSnakeCaseOutput',
            'pascalCaseOutput', 'kebabCaseOutput', 'lowercaseOutput'];
        outputs.forEach(id => {
            const element = document.getElementById(id);
            if (element) {
                element.value = 'Î≥ÄÌôò Í≤∞Í≥º...';
            }
        });
    }

    // ÏºÄÏù¥Ïä§ Î≥µÏÇ¨ Ìï®Ïàò
    async function copyCaseOutput(elementId) {
        const element = document.getElementById(elementId);
        const text = element.value;
        // Ìï®Ïàò ÎèôÏûë ÏöîÏïΩ Î°úÍ∑∏
        console.log(`[copyCaseOutput] ${elementId}Ïùò Í∞íÏùÑ ÌÅ¥Î¶ΩÎ≥¥ÎìúÏóê Î≥µÏÇ¨Ìï©ÎãàÎã§.`, { value: text });
        try {
            await navigator.clipboard.writeText(text);
            showCaseCopySuccess(elementId);
            // Î≥µÏÇ¨ ÏÑ±Í≥µ Î°úÍ∑∏
            console.log(`[copyCaseOutput] Î≥µÏÇ¨ ÏÑ±Í≥µ:`, text);
        } catch (err) {
            // Fallback for older browsers
            const textArea = document.createElement('textarea');
            textArea.value = text;
            document.body.appendChild(textArea);
            textArea.select();
            document.execCommand('copy');
            document.body.removeChild(textArea);
            showCaseCopySuccess(elementId);
            // Î≥µÏÇ¨ ÏÑ±Í≥µ Î°úÍ∑∏ (fallback)
            console.log(`[copyCaseOutput] Î≥µÏÇ¨ ÏÑ±Í≥µ(fallback):`, text);
        }
    }

    // Î≥µÏÇ¨ ÏÑ±Í≥µ Î©îÏãúÏßÄ (Î≤ÑÌäºÏóê ÌëúÏãú)
    function showCaseCopySuccess(elementId) {
        const button = document.querySelector(`#${elementId}`).parentElement.querySelector('.case-copy-btn');
        const originalText = button.textContent;
        button.textContent = 'Î≥µÏÇ¨Îê®!';
        button.style.background = 'rgba(76, 175, 80, 0.3)';
        setTimeout(() => {
            button.textContent = originalText;
            button.style.background = '';
        }, 2000);
    }

    // ÏºÄÏù¥Ïä§ Î≥ÄÌôò Ìï®ÏàòÎì§
    function toCamelCase(str) {
        if (!str) return '';
        return str
          .replace(/(?:^\w|[A-Z]|\b\w)/g, (word, index) => {
              return index === 0 ? word.toLowerCase() : word.toUpperCase();
          })
          .replace(/[\s_-]+/g, '');
    }

    function toSnakeCase(str) {
        if (!str) return '';
        return str
          .replace(/([A-Z])/g, '_$1')
          .replace(/[\s-]+/g, '_')
          .replace(/^_/, '')
          .toLowerCase();
    }

    function toScreamingSnakeCase(str) {
        return toSnakeCase(str).toUpperCase();
    }

    function toPascalCase(str) {
        if (!str) return '';
        return str
          .replace(/(?:^\w|[A-Z]|\b\w)/g, word => word.toUpperCase())
          .replace(/[\s_-]+/g, '');
    }

    function toKebabCase(str) {
        if (!str) return '';
        return str
          .replace(/([A-Z])/g, '-$1')
          .replace(/[\s_]+/g, '-')
          .replace(/^-/, '')
          .toLowerCase();
    }

    // Î©îÏù∏ Î≥ÄÌôò Ìï®Ïàò
    function convertCode() {
        const jsonInput = document.getElementById('jsonInput').value.trim();

        if (!jsonInput) {
            showError('JSON Îç∞Ïù¥ÌÑ∞Î•º ÏûÖÎ†•Ìï¥Ï£ºÏÑ∏Ïöî.');
            return;
        }

        try {
            const jsonObj = JSON.parse(jsonInput);

            // JavaScript Í∞ùÏ≤¥ Î≥ÄÌôò
            const jsCode = generateJavaScriptObject(jsonObj);
            document.getElementById('jsOutputField').value = jsCode;

            // Java DTO Î≥ÄÌôò
            const javaCode = generateJavaDTO(jsonObj, 'DataDto');
            document.getElementById('javaOutputField').value = javaCode;

            clearError();
        } catch (error) {
            showError('Ïú†Ìö®ÌïòÏßÄ ÏïäÏùÄ JSON ÌòïÏãùÏûÖÎãàÎã§: ' + error.message);
        }
    }

    // JavaScript Í∞ùÏ≤¥ ÏÉùÏÑ±
    function generateJavaScriptObject(obj) {
        return `// JavaScript Í∞ùÏ≤¥
const data = ${JSON.stringify(obj, null, 2)};

// ÏÇ¨Ïö© ÏòàÏãú:
console.log(data);

// Í∞ùÏ≤¥ Ï†ëÍ∑º ÏòàÏãú:
${generateAccessExamples(obj, 'data')}`;
    }

    // Ï†ëÍ∑º ÏòàÏãú ÏÉùÏÑ±
    function generateAccessExamples(obj, prefix, examples = []) {
        if (examples.length >= 5) return examples.join('\n');

        for (const [key, value] of Object.entries(obj)) {
            if (examples.length >= 5) break;

            const accessor = `${prefix}.${key}`;
            examples.push(`// ${accessor} = ${JSON.stringify(value)}`);

            if (typeof value === 'object' && value !== null && !Array.isArray(value)) {
                generateAccessExamples(value, accessor, examples);
            }
        }

        return examples.join('\n');
    }

    // Java DTO ÏÉùÏÑ±
    function generateJavaDTO(obj, className = 'DataDto') {
        const fields = [];
        const methods = [];
        const imports = new Set();

        generateFieldsAndMethods(obj, fields, methods, imports);

        let javaCode = '';

        // Import statements
        if (imports.size > 0) {
            Array.from(imports).sort().forEach(imp => {
                javaCode += `import ${imp};\n`;
            });
            javaCode += '\n';
        }

        // Class declaration
        javaCode += `public class ${className} {\n\n`;

        // Fields
        fields.forEach(field => {
            javaCode += `    ${field}\n`;
        });

        if (fields.length > 0) javaCode += '\n';

        // Default constructor
        javaCode += `    public ${className}() {\n    }\n\n`;

        // Constructor with all fields
        if (fields.length > 0) {
            const constructorParams = fields.map(field => {
                const parts = field.split(' ');
                const type = parts[1];
                const name = parts[2].replace(';', '');
                return `${type} ${name}`;
            }).join(', ');

            javaCode += `    public ${className}(${constructorParams}) {\n`;
            fields.forEach(field => {
                const fieldName = field.split(' ')[2].replace(';', '');
                javaCode += `        this.${fieldName} = ${fieldName};\n`;
            });
            javaCode += '    }\n\n';
        }

        // Getter and Setter methods
        methods.forEach(method => {
            javaCode += `    ${method}\n\n`;
        });

        javaCode += '}';

        return javaCode;
    }

    // ÌïÑÎìúÏôÄ Î©îÏÜåÎìú ÏÉùÏÑ±
    function generateFieldsAndMethods(obj, fields, methods, imports, prefix = '') {
        for (const [key, value] of Object.entries(obj)) {
            const fieldName = toCamelCase(key);
            const javaType = getJavaType(value, imports);

            fields.push(`private ${javaType} ${fieldName};`);

            // Getter
            const getterName = javaType === 'boolean' ? `is${capitalize(fieldName)}` : `get${capitalize(fieldName)}`;
            methods.push(`public ${javaType} ${getterName}() {\n        return ${fieldName};\n    }`);

            // Setter
            methods.push(`public void set${capitalize(fieldName)}(${javaType} ${fieldName}) {\n        this.${fieldName} = ${fieldName};\n    }`);
        }
    }

    // Java ÌÉÄÏûÖ Í≤∞Ï†ï
    function getJavaType(value, imports) {
        if (value === null) return 'Object';

        switch (typeof value) {
            case 'string':
                return 'String';
            case 'number':
                return Number.isInteger(value) ? 'Integer' : 'Double';
            case 'boolean':
                return 'Boolean';
            case 'object':
                if (Array.isArray(value)) {
                    imports.add('java.util.List');
                    if (value.length > 0) {
                        const elementType = getJavaType(value[0], imports);
                        return `List<${elementType}>`;
                    }
                    return 'List<Object>';
                } else {
                    // Ï§ëÏ≤© Í∞ùÏ≤¥Ïùò Í≤ΩÏö∞ Map ÏÇ¨Ïö©
                    imports.add('java.util.Map');
                    return 'Map<String, Object>';
                }
            default:
                return 'Object';
        }
    }

    // Ïú†Ìã∏Î¶¨Ìã∞ Ìï®ÏàòÎì§ (Í∏∞Ï°¥ toCamelCase Ìï®Ïàò Ï†úÍ±∞ÌïòÍ≥† ÏúÑÏùò ÏÉàÎ°úÏö¥ Ìï®Ïàò ÏÇ¨Ïö©)
    function capitalize(str) {
        return str.charAt(0).toUpperCase() + str.slice(1);
    }

    // ÌÅ¥Î¶ΩÎ≥¥Îìú Î≥µÏÇ¨
    async function copyToClipboard(elementId) {
        const element = document.getElementById(elementId);
        const text = element.textContent;

        try {
            await navigator.clipboard.writeText(text);
            showSuccess(elementId);
        } catch (err) {
            // Fallback for older browsers
            const textArea = document.createElement('textarea');
            textArea.value = text;
            document.body.appendChild(textArea);
            textArea.select();
            document.execCommand('copy');
            document.body.removeChild(textArea);
            showSuccess(elementId);
        }
    }

    // ÏÑ±Í≥µ Î©îÏãúÏßÄ ÌëúÏãú
    function showSuccess(elementId) {
        const button = document.querySelector(`#${elementId}`).parentElement.querySelector('.copy-btn');
        const originalText = button.textContent;
        button.textContent = 'Î≥µÏÇ¨Îê®!';
        button.style.background = 'rgba(76, 175, 80, 0.3)';

        setTimeout(() => {
            button.textContent = originalText;
            button.style.background = 'rgba(255, 255, 255, 0.2)';
        }, 2000);
    }

    // ÏóêÎü¨ ÌëúÏãú
    function showError(message) {
        clearError();
        const errorDiv = document.createElement('div');
        errorDiv.className = 'error';
        errorDiv.textContent = message;
        document.querySelector('.input-section').appendChild(errorDiv);
    }

    // ÏóêÎü¨ Ï†úÍ±∞
    function clearError() {
        const existingError = document.querySelector('.error');
        if (existingError) {
            existingError.remove();
        }
    }

    // Ï¥àÍ∏∞ ÏòàÏãú Î≥ÄÌôò
    window.onload = function() {
        setTimeout(() => {
            if (!document.getElementById('jsonInput').value.trim()) {
                document.getElementById('jsonInput').value = `{
  "user_name": "ÌôçÍ∏∏Îèô",
  "USER_AGE": 30,
  "emailAddress": "hong@example.com",
  "home_address": {
    "city_name": "ÏÑúÏö∏",
    "zip_code": "12345"
  },
  "user_hobbies": ["ÎèÖÏÑú", "ÏòÅÌôîÍ∞êÏÉÅ"],
  "isActive": true
}`;
                updateKeysAndCases();
                convertCode();
            }
        }, 500);
    };

    // suffix ÏùºÍ¥Ñ ÏÇΩÏûÖ Î∞è ÎêòÎèåÎ¶¨Í∏∞ Í∏∞Îä• (Î™®Îì† ÏºÄÏù¥Ïä§ textareaÏóê Ï†ÅÏö©)
    const suffixHistory = {};
    const caseTextareaIds = [
        'camelCaseOutput',
        'snakeCaseOutput',
        'screamingSnakeCaseOutput',
        'pascalCaseOutput',
        'kebabCaseOutput',
        'lowercaseOutput'
    ];
    function addSuffixToAll() {
        const suffix = document.getElementById('globalSuffix').value;
        caseTextareaIds.forEach(textareaId => {
            const textarea = document.getElementById(textareaId);
            if (!suffixHistory[textareaId]) {
                suffixHistory[textareaId] = textarea.value;
            }
            const lines = textarea.value.split('\n');
            textarea.value = lines.map(line => line ? line + suffix : line).join('\n');
            console.log(`[addSuffixToAll] ${textareaId} Í∞Å Ìñâ ÎÅùÏóê '${suffix}' Ï∂îÍ∞ÄÎê®.`);
        });
    }
    function redoSuffixAll() {
        caseTextareaIds.forEach(textareaId => {
            const textarea = document.getElementById(textareaId);
            if (suffixHistory[textareaId]) {
                textarea.value = suffixHistory[textareaId];
                delete suffixHistory[textareaId];
                console.log(`[redoSuffixAll] ${textareaId} ÎêòÎèåÎ¶¨Í∏∞ ÏôÑÎ£å.`);
            }
        });
    }

    // suffix Í¥ÄÎ†® Ïä§ÌÉÄÏùº
    const style = document.createElement('style');
    style.innerHTML = `
        .suffix-tools {
            display: flex;
            align-items: center;
            margin-top: 4px;
            gap: 2px;
        }
        .suffix-input {
            border: 1px solid #e1e5e9;
            border-radius: 4px;
            height: 22px;
        }
        .suffix-btn {
            background: #e1e5e9;
            color: #333;
            border: none;
            border-radius: 4px;
            font-size: 11px;
            padding: 2px 8px;
            margin-left: 1px;
            cursor: pointer;
            transition: background 0.2s;
        }
        .suffix-btn:hover {
            background: #bfc8d6;
        }
    `;
    document.head.appendChild(style);
</script>
</body>
</html>